<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Film Share</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/lightslider.css">
    <!-- fav icon  da mettere-->
</head>

<script src="js/jquery-3.6.0.js"></script>
<body>
   <!--barra navigazione-->
   <nav>
    <!--logo--------------->
    <a href="#" class="logo">
        <img src="images/logo.png" />
    </a>
    <!-- menu -->
    <ul class="menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="#">Films</a></li>
        <li><a href="membri.html">Membri</a></li>
        <li><a href="#">Login</a></li>
        <li><a href="#">Signup</a></li>
    </ul>
    <!-- Funzione di ricerca-->

    <div class="search-container">
        
        <input type="text"  id="search" placeholder="Titolo Film"/>
        <button type="submit" onclick="getInput()"><i class="fa fa-search"></i></button>
    
    </div>
</nav>
    <p><img src="https://image.tmdb.org/t/p/w185//xfYMQNApIIh8KhpNVtG1XRz0ZAp.jpg" alt="Jaws"/></p>
    <div id="output">
        <!-- output will go here -->
    </div>
    
    <script>
        /*************
        SAMPLE URLS
        
        1. To get the config data like image base urls
        https://api.themoviedb.org/3/configuration?api_key=<APIKEY>
        
        2. To fetch a list of movies based on a keyword
        https://api.themoviedb.org/3/search/movie?api_key=<APIKEY>&query=<keyword>
        
        3. To fetch more details about a movie
        https://api.themoviedb.org/3/movie/<movie-id>?api_key=<APIKEY>
        *************/
        //const APIKEY is inside key.js
        let baseURL = 'https://api.themoviedb.org/3/';
        let configData = null;
        let baseImageURL = null;
        let CesarAPI ='7d8a0acbac9d46ce5f7a8ee14eb40411';
        
        // let getConfig = function () {
        //     let url = "".concat(baseURL, 'configuration?api_key=', CesarAPI); 
        //     fetch(url)
        //     .then((result)=>{
        //         return result.json();
        //     })
        //     .then((data)=>{
        //         baseImageURL = data.images.secure_base_url;
        //         configData = data.images;
        //         console.log('config:', data);
        //         console.log('config fetched');
        //         runSearch('upside down magic')
        //     })
        //     .catch(function(err){
        //         alert(err);
        //     });
        // }
        function getInput(){
            var input = document.getElementById("search")
        }
        let runSearch = function (keyword) {
            let url = ''.concat(baseURL, 'search/movie?api_key=', CesarAPI, '&query=', keyword);
            fetch(url)
            .then(result=>result.json())
            .then((data)=>{
                //process the returned data
                document.getElementById('output').innerHTML = JSON.stringify(data, null, 4);
                //work with results array...
                
            })
        }
        
        document.addEventListener('DOMContentLoaded', runSearch('upside down magic'));
        /*******************************
        SAMPLE SEARCH RESULTS DATA
        { "vote_count": 2762, 
            "id": 578, 
            "video": false, 
            "vote_average": 7.5, 
            "title": "Jaws", 
            "popularity": 16.273358, 
            "poster_path": "/l1yltvzILaZcx2jYvc5sEMkM7Eh.jpg", 
            "original_language": "en", 
            "original_title": "Jaws", 
            "genre_ids": [ 27, 53, 12 ], 
            "backdrop_path": "/slkPgAt1IQgxZXNrazEcOzhAK8f.jpg", 
            "adult": false, 
            "overview": "An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast.", 
            "release_date": "1975-06-18" 
        }
        *******************************/
    </script>
</body>
</html>